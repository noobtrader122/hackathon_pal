{% extends "layout.html" %}

{% block content %}
<div class="hackathon-list-container" role="main" aria-label="Active Hackathons List">
  <h2 class="page-title">Active Hackathons</h2>
  {% if hackathons %}
    <div class="hackathon-list">
      {% for h in hackathons %}
        <div class="hackathon-card" role="region" aria-labelledby="hackathon-title-{{ h.id }}">
          <div class="hackathon-card-body">
            <h3 id="hackathon-title-{{ h.id }}" class="hackathon-title">
              {{ h.name }}
              {# "New" badge if hackathon started less than 7 days ago #}
              {% if now and h.start_time and (h.start_time > (now - timedelta(days=7))) %}
                <span class="hackathon-badge" aria-label="New Hackathon">New</span>
              {% endif %}
            </h3>
            {% if h.description %}
              <p class="hackathon-desc">{{ h.description|truncate(200) }}</p>
            {% endif %}
            <div class="hackathon-meta">
              <span>
                Start: {{ h.start_time.strftime('%b %d, %Y') if h.start_time else 'TBA' }}
              </span>
              <span>
                End: {{ h.end_time.strftime('%b %d, %Y') if h.end_time else 'TBA' }}
              </span>
              {% if session.get('is_admin') %}
                <span>
                  <a href="{{ url_for('admin_hackathon.edit_hackathon', id=h.id) }}"
                     class="hackathon-edit-link" title="Edit Hackathon" aria-label="Edit {{ h.name }}">
                    <i class="fa-solid fa-pen-to-square" aria-hidden="true"></i> Edit
                  </a>
                </span>
              {% endif %}
            </div>
            <a href="{{ url_for('challenge_bp.list_challenges', hackathon_id=h.id) }}" 
               class="hackathon-view-btn" role="button" aria-label="View challenges for {{ h.name }}">
              View Challenges
            </a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state" role="alert">
      <em>No hackathons available yet.</em>
    </div>
  {% endif %}
</div>

<style>
.hackathon-list-container {
  max-width: 900px;
  margin: 3.5rem auto 2rem auto;
  padding: 1.4em;
  background: #f7faff;
  border-radius: 18px;
  box-shadow: 0 2.5px 20px rgba(0,0,0,0.06);
}

.page-title {
  font-size: 2.1em;
  font-weight: 700;
  color: #225686;
  margin-bottom: 2em;
  text-align: center;
}

.hackathon-list {
  display: flex;
  flex-wrap: wrap;
  gap: 2.2em;
  justify-content: center;
}

.hackathon-card {
  width: 330px;
  background: #eaf2ff;
  padding: 1.7em 1.2em 1.1em 1.2em;
  border-radius: 13px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.07);
  display: flex;
  flex-direction: column;
}

.hackathon-title {
  font-size: 1.22em;
  font-weight: 600;
  letter-spacing: .4px;
  margin-bottom: 0.45em;
  color: #184a82;
  display: flex;
  align-items: center;
  gap: 0.75em;
}

.hackathon-badge {
  background: #54b583;
  color: #fff;
  font-size: 0.82em;
  font-weight: 600;
  padding: 2px 9px;
  border-radius: 8px;
  margin-left: 0.5em;
  letter-spacing: .4px;
}

.hackathon-desc {
  font-size: 1em;
  color: #355075;
  margin-bottom: 1.5em;
}

.hackathon-meta {
  font-size: .97em;
  color: #7486b2;
  margin-bottom: 1em;
  display: flex;
  gap: 1.2em;
  align-items: center;
}

.hackathon-edit-link {
  color: #a56e12;
  margin-left: 0.2em;
  font-size: .98em;
  text-decoration: none;
  transition: color .16s;
}
.hackathon-edit-link:hover {
  color: #ffbb53;
  text-decoration: underline;
}

.hackathon-view-btn {
  display: inline-block;
  padding: 0.6em 1.3em;
  background: #2567ba;
  color: white !important;
  border-radius: 8px;
  font-size: 1em;
  font-weight: 600;
  text-decoration: none;
  letter-spacing: .4px;
  transition: background 0.16s;
  text-align: center;
}
.hackathon-view-btn:hover,
.hackathon-view-btn:focus {
  background: #095bb6;
  outline: none;
}
.empty-state {
  text-align: center;
  color: #475a7b;
  margin: 3em 0;
  font-size: 1.08em;
}
</style>
{% endblock %}
